<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸©é¦¨æç¤º - ç”Ÿæ—¥å¿«ä¹</title>
    <style>
        /* === åŸºç¡€è®¾ç½® === */
        body {
            margin: 0;
            padding: 0;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            /* é˜²æ­¢æ»šåŠ¨æ¡å‡ºç° */
            background-color: #f0f2f5;
            position: relative;
            transition: background 0.5s;
        }

        /* === æ˜¼å¤œæ¨¡å¼é€‚é… === */
        body.dark-mode {
            background-color: #1a2340;
        }

        /* === ç¥ç¦å¡ç‰‡æ ·å¼ (æ–‡å­—å’Œç…§ç‰‡é€šç”¨) === */
        .wish-card {
            position: absolute;
            width: 250px;
            /* é»˜è®¤å®½åº¦ */
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            text-align: center;
            font-size: 16px;
            font-weight: bold;
            color: #333;
            user-select: none;
            cursor: default;
            opacity: 0;
            transform: scale(0.5);
            animation: popIn 0.5s forwards;
            z-index: 10;

            /* è®©å†…å®¹å‚ç›´å±…ä¸­ */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* ç…§ç‰‡å¡ç‰‡é‡Œçš„å›¾ç‰‡æ ·å¼ */
        .wish-card img {
            width: 100%;
            height: auto;
            border-radius: 5px;
            display: block;
            pointer-events: none;
            /* é˜²æ­¢å›¾ç‰‡è¢«æ‹–æ‹½ */
        }

        /* åŠ¨ç”»æ•ˆæœï¼šä»å°å˜å¤§å¼¹å‡º */
        @keyframes popIn {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* === é€€å‡ºæŒ‰é’®æ ·å¼ === */
        .exit-btn {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 120px;
            height: 40px;
            background-color: #F08080;
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            transition: transform 0.2s;
        }

        .exit-btn:hover {
            transform: scale(1.1);
            background-color: #e66b6b;
        }

        /* === æ˜¼å¤œå¼€å…³æ ·å¼ (ä¿æŒä¸å˜) === */
        .toggle-wrapper {
            position: fixed;
            top: 20px;
            right: 20px;
            transform: scale(0.4);
            transform-origin: top right;
            z-index: 1001;
        }

        .toggle-checkbox {
            display: none;
        }

        .toggle-label {
            width: 180px;
            height: 80px;
            background-color: #87CEEB;
            border-radius: 80px;
            position: relative;
            cursor: pointer;
            display: block;
            overflow: hidden;
            box-shadow: inset 0 4px 10px rgba(0, 0, 0, 0.2), inset 0 -4px 8px rgba(255, 255, 255, 0.8), 0 8px 15px rgba(0, 0, 0, 0.1);
            border: 6px solid #dbe4ef;
            transition: background-color 0.5s ease;
        }

        .background-day {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            transition: 0.5s;
        }

        .cloud {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            opacity: 0.9;
        }

        .cloud-1 {
            width: 60px;
            height: 60px;
            left: 60px;
            bottom: -30px;
        }

        .cloud-2 {
            width: 50px;
            height: 50px;
            left: 90px;
            bottom: -20px;
            z-index: 2;
        }

        .cloud-3 {
            width: 70px;
            height: 70px;
            right: 10px;
            bottom: -35px;
        }

        .cloud-4 {
            width: 40px;
            height: 40px;
            right: 60px;
            bottom: -15px;
            opacity: 0.7;
        }

        .background-night {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to right, #1a2340, #2b324d);
            opacity: 0;
            transform: translateX(-100%);
            transition: 0.5s;
        }

        .star {
            position: absolute;
            background-color: #fff;
            border-radius: 50%;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        }

        .star-1 {
            width: 8px;
            height: 8px;
            top: 20px;
            left: 40px;
        }

        .star-2 {
            width: 6px;
            height: 6px;
            top: 45px;
            left: 70px;
        }

        .star-3 {
            width: 5px;
            height: 5px;
            top: 15px;
            left: 90px;
        }

        .dot {
            position: absolute;
            background-color: #fff;
            border-radius: 50%;
            opacity: 0.6;
        }

        .dot-1 {
            width: 3px;
            height: 3px;
            top: 50px;
            left: 20px;
        }

        .dot-2 {
            width: 2px;
            height: 2px;
            top: 30px;
            left: 60px;
        }

        .toggle-button {
            position: absolute;
            top: 6px;
            left: 6px;
            width: 68px;
            height: 68px;
            border-radius: 50%;
            background: #FFD54F;
            box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.1), 0 2px 5px rgba(0, 0, 0, 0.2), 0 0 10px 2px rgba(253, 216, 53, 0.4);
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            z-index: 10;
            overflow: hidden;
        }

        .crater {
            position: absolute;
            background-color: #9aa7b5;
            border-radius: 50%;
            box-shadow: inset 1px 1px 3px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transition: 0.3s;
        }

        .crater-1 {
            width: 20px;
            height: 20px;
            top: 10px;
            left: 25px;
        }

        .crater-2 {
            width: 10px;
            height: 10px;
            top: 40px;
            left: 15px;
        }

        .crater-3 {
            width: 8px;
            height: 8px;
            top: 35px;
            left: 45px;
        }

        .toggle-checkbox:checked+.toggle-label .toggle-button {
            transform: translateX(100px);
            background: #eef2f5;
            box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.1), 0 2px 5px rgba(0, 0, 0, 0.3), 0 0 15px 3px rgba(255, 255, 255, 0.4);
        }

        .toggle-checkbox:checked+.toggle-label .toggle-button .crater {
            opacity: 1;
        }

        .toggle-checkbox:checked+.toggle-label .background-day {
            transform: translateY(100%);
            opacity: 0;
        }

        .toggle-checkbox:checked+.toggle-label .background-night {
            transform: translateX(0);
            opacity: 1;
        }

        .toggle-checkbox:checked+.toggle-label {
            background-color: #1a2340;
            border-color: #576075;
        }
    </style>
</head>

<body>

    <div class="toggle-wrapper">
        <input type="checkbox" id="day-night-switch" class="toggle-checkbox">
        <label for="day-night-switch" class="toggle-label">
            <div class="background-night">
                <span class="star star-1"></span><span class="star star-2"></span><span class="star star-3"></span>
                <span class="dot dot-1"></span><span class="dot dot-2"></span>
            </div>
            <div class="background-day">
                <div class="cloud cloud-1"></div>
                <div class="cloud cloud-2"></div>
                <div class="cloud cloud-3"></div>
                <div class="cloud cloud-4"></div>
            </div>
            <div class="toggle-button">
                <span class="crater crater-1"></span><span class="crater crater-2"></span><span
                    class="crater crater-3"></span>
            </div>
        </label>
    </div>

    <div id="wishes-container"></div>

    <button class="exit-btn" onclick="exitPage()">é€€å‡ºç¨‹åº</button>

    <script src="assets/js/theme.js"></script>

    <script>
        // === 1. æ•°æ®å‡†å¤‡ (ç¥ç¦è¯­) ===
        const tips = [
            'ç¥æˆ‘å¥½é—ºé—ºæ²¡ç¾æ²¡ç—…', 'é‡‘æ¦œé¢˜å', 'ç¥ä½ æ¯å¤©éƒ½æ„Ÿåˆ°å¹¸ç¦',
            'å¥½å¿ƒæƒ…å‘ä½ é è¿‘åå¿ƒæƒ…è¿œç¦»', 'ä¿æŒå¥½å¿ƒæƒ…', 'å¥½å¥½çˆ±è‡ªå·±', 'ç¥æˆ‘å¥½é—ºé—º23å²ç”Ÿæ—¥å¿«ä¹',
            'ç¥ä½ æ‰€æƒ³çš†æ‰€æˆ', 'æœŸå¾…ä¸‹ä¸€æ¬¡è§é¢', 'ç¥ä½ ä¸€æ¬¡è€ƒç ”ä¸Šå²¸',
            'æœ‰äº‹ä¸è¦è‡ªå·±ä¸€ä¸ªäººæ‰›', 'ç»“å©šç»“å©š', 'æ„¿æ‰€æœ‰çƒ¦æ¼éƒ½æ¶ˆå¤±',
            'è¦å¥½å¥½çˆ±è‡ªå·±', 'ä»Šå¤©è¿‡å¾—å¼€å¿ƒå˜›', 'ç¥æˆ‘å¥½é—ºé—ºå‘è´¢æš´å¯Œ', 'æ¯å¤©å¼€å¼€å¿ƒå¿ƒ'
        ];

        // === 2. ç…§ç‰‡åˆ—è¡¨ (è¯·åœ¨è¿™é‡Œä¿®æ”¹ä½ çš„ç…§ç‰‡è·¯å¾„) ===
        // æ³¨æ„ï¼šå¦‚æœä½ åªæœ‰3å¼ ç…§ç‰‡ï¼Œå°±åªå¡«3ä¸ªï¼›è·¯å¾„è¦å¯¹ï¼Œä¸ç„¶ä¼šè‡ªåŠ¨å˜æˆæ–‡å­—å¡ç‰‡
        const photos = [
            "assets/images/photos/1.jpg",
            "assets/images/photos/2.jpg",
            "assets/images/photos/5.jpg"
        ];

        const bgColors = [
            '#FFB6C1', '#87CEEB', '#90EE90', // lightpink, skyblue, lightgreen
            '#E6E6FA', // lavender
            '#FFFFE0', '#DDA0DD', '#FF7F50', '#FFE4C4', // lightyellow, plum, coral, bisque
            '#7FFFD4', // aquamarine
            '#FFE4E1', '#F0FFF0', // mistyrose, honeydew
            '#FFF0F5', '#FDF5E6'  // lavenderblush, oldlace
        ];

        const container = document.getElementById('wishes-container');
        let count = 0;
        const maxWishes = 200; // æœ€å¤§æ•°é‡

        // === 3. åˆ›å»ºéšæœºå¡ç‰‡å‡½æ•° (æ–‡å­—/ç…§ç‰‡æ··åˆ) ===
        function createWish() {
            if (count >= maxWishes) return;

            const div = document.createElement('div');
            div.className = 'wish-card';

            // ğŸ² 30% çš„æ¦‚ç‡æ˜¾ç¤ºç…§ç‰‡ (å‰ææ˜¯ç…§ç‰‡åˆ—è¡¨é‡Œæœ‰ä¸œè¥¿)
            const showPhoto = photos.length > 0 && Math.random() < 0.3;

            if (showPhoto) {
                // === ç…§ç‰‡æ¨¡å¼ ===
                const imgPath = photos[Math.floor(Math.random() * photos.length)];

                // è®¾ç½®æˆâ€œæ‹ç«‹å¾—â€é£æ ¼ï¼šç™½åº•ï¼Œç•™ä¸€ç‚¹è¾¹è·
                div.style.backgroundColor = "#fff";
                div.style.padding = "5px";
                div.style.boxShadow = "0 8px 20px rgba(0,0,0,0.3)"; // ç…§ç‰‡é˜´å½±ç¨å¾®é‡ä¸€ç‚¹

                const img = document.createElement('img');
                img.src = imgPath;

                // é”™è¯¯å¤„ç†ï¼šä¸‡ä¸€å›¾ç‰‡è·¯å¾„å†™é”™äº†ï¼ŒåŠ è½½å¤±è´¥æ—¶å˜å›æ–‡å­—å¡ç‰‡
                img.onerror = function () {
                    console.log("å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œåˆ‡æ¢å›æ–‡å­—:", imgPath);
                    div.innerHTML = ""; // æ¸…é™¤åå›¾
                    setupTextCard(div); // å˜èº«æ–‡å­—å¡
                };

                div.appendChild(img);

            } else {
                // === æ–‡å­—æ¨¡å¼ ===
                setupTextCard(div);
            }

            // === é€šç”¨ï¼šéšæœºä½ç½®å’Œæ—‹è½¬ ===
            const maxX = window.innerWidth - 280;
            const maxY = window.innerHeight - 80;
            const x = Math.random() * maxX;
            const y = Math.random() * maxY;

            div.style.left = x + 'px';
            div.style.top = y + 'px';

            const rotate = (Math.random() - 0.5) * 30; // æ—‹è½¬è§’åº¦ç¨å¾®å¤§ä¸€ç‚¹ (-15 ~ 15åº¦)
            div.style.transform = `rotate(${rotate}deg) scale(0.5)`;

            container.appendChild(div);
            count++;

            // è¿›åœºåŠ¨ç”»ä¿®æ­£
            setTimeout(() => {
                div.style.transform = `rotate(${rotate}deg) scale(1)`;
                div.style.opacity = 1;
            }, 50);
        }

        // è¾…åŠ©å‡½æ•°ï¼šç”Ÿæˆæ–‡å­—å¡ç‰‡å†…å®¹
        function setupTextCard(div) {
            div.innerText = tips[Math.floor(Math.random() * tips.length)];
            div.style.backgroundColor = bgColors[Math.floor(Math.random() * bgColors.length)];
            div.style.padding = "15px"; // æ¢å¤æ–‡å­—çš„å†…è¾¹è·
            div.style.color = "#333";
        }

        // === 4. å¯åŠ¨å¾ªç¯ç”Ÿæˆ ===
        let interval = setInterval(() => {
            createWish();
            if (count >= maxWishes) clearInterval(interval);
        }, 50); // æ¯50æ¯«ç§’å¼¹ä¸€ä¸ª

        // === 5. é€€å‡ºé€»è¾‘ ===
        function exitPage() {
            container.innerHTML = '';
            count = 0;
            window.location.href = "index.html";
        }
    </script>
</body>

</html>