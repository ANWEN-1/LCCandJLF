<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„ç›¸å†Œ</title>
    <style>
        /* === é»‘å¤œæ¨¡å¼é€šç”¨æ ·å¼ (å¤åˆ¶åˆ°æ‰€æœ‰é¡µé¢) === */
        body.dark-mode {
            background-color: #1a2340 !important;
            /* èƒŒæ™¯å˜æ·±è“é»‘ */
            color: #e0e0e0 !important;
            /* æ–‡å­—å˜ç°ç™½ */
        }

        /* è®©æ‰€æœ‰ç±»å‹çš„å¡ç‰‡å˜é»‘ (ç›¸å†Œå¡ç‰‡ã€3Då¡ç‰‡ã€æ™®é€šå¡ç‰‡) */
        body.dark-mode .card,
        body.dark-mode .photo-card,
        body.dark-mode .model-card,
        body.dark-mode .modal-content {
            background-color: #2b324d !important;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5) !important;
            color: #fff !important;
        }

        /* è®©æ ‡é¢˜å’Œæ–‡å­—å˜ç™½ */
        body.dark-mode h1,
        body.dark-mode h2,
        body.dark-mode h3,
        body.dark-mode p {
            color: #fff !important;
        }

        /* è®©é¡¶éƒ¨è¿”å›æŒ‰é’®é€‚é… */
        body.dark-mode .back-btn {
            background-color: #384260 !important;
            color: #fff !important;
            border-color: #555 !important;
        }

        /* 3D æ¨¡å‹çš„èƒŒæ™¯è‰²ç‰¹æ®Šå¤„ç† */
        body.dark-mode model-viewer {
            background-color: #2b324d !important;
        }

        /* === åŸºç¡€è®¾ç½® (ä¿æŒä¸å˜) === */
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
            color: #333;
        }

        header {
            text-align: center;
            margin-bottom: 80px;
            margin-top: 20px;
        }

        .back-btn {
            display: inline-block;
            text-decoration: none;
            color: #666;
            border: 1px solid #ccc;
            padding: 8px 20px;
            border-radius: 20px;
            background: white;
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .back-btn:hover {
            background: #333;
            color: white;
            border-color: #333;
        }

        /* === ç½‘æ ¼å¸ƒå±€ (ä¿æŒä¸å˜) === */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            grid-auto-rows: 200px;
            gap: 15px;
            max-width: 1000px;
            margin: 0 auto;
        }

        /* === ç…§ç‰‡å¡ç‰‡ (ä¿æŒä¸å˜) === */
        .photo-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: fadeIn 0.5s ease-in;
            position: relative;
        }

        .photo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
        }

        /* === å›¾ç‰‡æœ¬ä½“ (é‡ç‚¹åœ¨è¿™é‡Œ) === */
        .photo-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* å¿…é¡»è¦æœ‰è¿™ä¸€å¥ï¼Œåé¢çš„ position æ‰ä¼šç”Ÿæ•ˆ */
            /* é»˜è®¤æ˜¯ object-position: center center; æˆ‘ä»¬ç”¨ JS æ¥æ”¹å®ƒ */
            display: block;
            transition: transform 0.5s ease;
            /* è®©å›¾ç‰‡æœ¬èº«ä¹Ÿæœ‰ä¸ªç¼“æ…¢æ”¾å¤§çš„æ•ˆæœ */
        }

        /* é¼ æ ‡æ”¾ä¸Šå»ï¼Œå›¾ç‰‡ç¨å¾®æ”¾å¤§ä¸€ç‚¹ç‚¹ï¼Œå¢åŠ åŠ¨æ„Ÿ */
        .photo-card:hover img {
            transform: scale(1.05);
        }


        /* å¸ƒå±€ç±» */
        .photo-card.wide {
            grid-column: span 2;
        }

        .photo-card.large {
            grid-column: span 2;
            grid-row: span 2;
        }

        @media (max-width: 600px) {

            .photo-card.wide,
            .photo-card.large {
                grid-column: span 1;
                grid-row: span 1;
            }
        }

        /* æ–‡å­—è¯´æ˜ */
        .caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 10px;
            font-size: 14px;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            text-align: center;
        }

        .photo-card:hover .caption {
            transform: translateY(0);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>

    <header>
        <a href="index.html" class="back-btn">â† è¿”å›ä¸»é¡µ</a>
        <h1>ğŸ“¸ æˆ‘çš„æ‘„å½±é›†</h1>
        <p id="gallery-info">åŠ è½½ä¸­...</p>
    </header>

    <div class="gallery" id="gallery-container"></div>

    <script>
        const galleryContainer = document.getElementById('gallery-container');
        const infoText = document.getElementById('gallery-info');

        fetch('data/photos.json')
            .then(response => response.json())
            .then(data => {
                infoText.innerText = `å…±æ”¶é›† ${data.length} å¼ ç²¾å½©ç¬é—´`;

                data.forEach((photo, index) => {
                    // 1. åˆ›å»ºå¡ç‰‡å®¹å™¨
                    const card = document.createElement('div');
                    card.className = 'photo-card';
                    if (photo.layout) card.classList.add(photo.layout);
                    card.style.animationDelay = `${index * 0.1}s`;

                    // 2. åˆ›å»ºå›¾ç‰‡å…ƒç´  (ç”¨æ›´è§„èŒƒçš„æ–¹å¼)
                    const img = document.createElement('img');
                    img.src = `assets/images/photos/${photo.filename}`;
                    img.alt = photo.desc;
                    img.loading = "lazy";

                    // === ã€æ ¸å¿ƒä¿®æ”¹ã€‘åº”ç”¨è‡ªå®šä¹‰ç„¦ç‚¹ ===
                    // å¦‚æœ JSON é‡Œå†™äº† positionï¼Œå°±æŠŠå®ƒåŠ åˆ°å›¾ç‰‡çš„æ ·å¼é‡Œ
                    if (photo.position) {
                        img.style.objectPosition = photo.position;
                    }

                    // 3. åˆ›å»ºæ–‡å­—è¯´æ˜
                    const caption = document.createElement('div');
                    caption.className = 'caption';
                    caption.innerText = photo.desc;

                    // 4. ç»„è£…èµ·æ¥
                    card.appendChild(img);
                    card.appendChild(caption);
                    galleryContainer.appendChild(card);
                });
            })
            .catch(error => {
                console.error('Error:', error);
                infoText.innerText = "è¯»å–å¤±è´¥ï¼Œè¯·æ£€æŸ¥ photos.json æ ¼å¼";
            });
    </script>
    <script src="assets/js/theme.js"></script>
</body>

</html>